{"ast":null,"code":"import _asyncToGenerator from\"/home/zuy/Documents/process-memory-p/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/zuy/Documents/process-memory-p/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/home/zuy/Documents/process-memory-p/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/zuy/Documents/process-memory-p/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/home/zuy/Documents/process-memory-p/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/home/zuy/Documents/process-memory-p/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/zuy/Documents/process-memory-p/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/home/zuy/Documents/process-memory-p/node_modules/@babel/runtime/regenerator/index.js\";import{Component}from'react';import{Form,FormGroup,FormFeedback,Label,Input,Button}from'reactstrap';import firebase from\"./../firebase\";import{getDatabase,ref,child,get}from\"firebase/database\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginPage=/*#__PURE__*/function(_Component){_inherits(LoginPage,_Component);var _super=_createSuper(LoginPage);function LoginPage(props){var _this;_classCallCheck(this,LoginPage);_this=_super.call(this,props);_this.handleChange=function(event){var target=event.target;var value=target.type==='checkbox'?target.checked:target.value;var name=target.name;_this.setState(_defineProperty({},name,value));};_this.state={computerId:'',parentKey:'',error:''};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(LoginPage,[{key:\"submitForm\",value:function(){var _submitForm=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var data,dbRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();data=null;dbRef=ref(getDatabase(firebase));_context.next=5;return get(child(dbRef,\"users/\".concat(this.state.computerId))).then(function(snapshot){if(snapshot.exists()){data=snapshot.val();}}).catch(function(error){console.error(error);});case 5:if(data.parentKey===this.state.parentKey){this.props.setLogin(data);}case 6:case\"end\":return _context.stop();}}},_callee,this);}));function submitForm(_x){return _submitForm.apply(this,arguments);}return submitForm;}()},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0110\\u0103ng nh\\u1EADp\"}),/*#__PURE__*/_jsxs(Form,{className:\"form\",onSubmit:function onSubmit(e){return _this2.submitForm(e);},children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"Computer ID\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"computerId\",id:\"computerId\",value:this.state.computerId,onChange:function onChange(e){_this2.handleChange(e);}})]}),/*#__PURE__*/_jsx(FormFeedback,{children:this.state.error}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"examplePassword\",children:\"Parent Key\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"parentKey\",id:\"parentKey\",value:this.state.parentKey,onChange:function onChange(e){return _this2.handleChange(e);}})]}),/*#__PURE__*/_jsx(Button,{color:\"primary\",children:\"\\u0110\\u0103ng nh\\u1EADp\"})]})]});}}]);return LoginPage;}(Component);export default LoginPage;","map":{"version":3,"sources":["/home/zuy/Documents/process-memory-p/src/pages/LoginPage.js"],"names":["Component","Form","FormGroup","FormFeedback","Label","Input","Button","firebase","getDatabase","ref","child","get","LoginPage","props","handleChange","event","target","value","type","checked","name","setState","state","computerId","parentKey","error","bind","e","preventDefault","data","dbRef","then","snapshot","exists","val","catch","console","setLogin","submitForm"],"mappings":"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","sourcesContent":["import { Component } from 'react';\nimport {\n    Form,\n    FormGroup,\n    FormFeedback,\n    Label,\n    Input,\n    Button,\n} from 'reactstrap';\n\nimport firebase from \"./../firebase\";\nimport { getDatabase, ref, child, get } from \"firebase/database\";\n\nclass LoginPage extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            computerId: '',\n            parentKey: '',\n            error: ''\n        };\n        this.handleChange = this.handleChange.bind(this);\n    }\n\n    handleChange = (event) => {\n        const { target } = event;\n        const value = target.type === 'checkbox' ? target.checked : target.value;\n        const { name } = target;\n\n        this.setState({\n            [name]: value,\n        });\n    };\n\n    async submitForm(e) {\n        e.preventDefault();\n        \n        let data = null;\n        const dbRef = ref(getDatabase(firebase));\n        await get(child(dbRef, `users/${this.state.computerId}`)).then((snapshot) => {\n            if (snapshot.exists()) {\n                data = snapshot.val();\n            }\n        }).catch((error) => {\n            console.error(error);\n        });\n        \n        if (data.parentKey === this.state.parentKey) {\n            this.props.setLogin(data);\n        }\n    }\n\n    render() {\n\n        return (\n            <div className=\"login\">\n                <h2>Đăng nhập</h2>\n                <Form className=\"form\" onSubmit={(e) => this.submitForm(e)}>\n                    <FormGroup>\n                        <Label>Computer ID</Label>\n                        <Input\n                            type=\"text\"\n                            name=\"computerId\"\n                            id=\"computerId\"\n                            value={this.state.computerId}\n                            onChange={(e) => {\n                                this.handleChange(e);\n                            }}\n                        />\n                    </FormGroup>\n                    <FormFeedback>\n                        {this.state.error}\n                    </FormFeedback>\n                    <FormGroup>\n                        <Label for=\"examplePassword\">Parent Key</Label>\n                        <Input\n                            type=\"password\"\n                            name=\"parentKey\"\n                            id=\"parentKey\"\n                            value={this.state.parentKey}\n                            onChange={(e) => this.handleChange(e)}\n                        />\n                    </FormGroup>\n                    <Button color=\"primary\">Đăng nhập</Button>\n                </Form>\n            </div>\n        );\n    }\n}\n\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}